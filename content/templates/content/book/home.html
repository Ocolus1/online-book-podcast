{% extends './base.html' %} 

{% block title %} 
    {{book.title}}
{% endblock title %} 


{% block body %}
{% include './header.html' %}
<main
	class="pointer-events-auto flex absolute w-full z-40 inset-0 top-[71px] items-center justify-center bg-white pt-6 overflow-y-auto overflow-x-hidden"
>
	<div
		class="h-full w-full sm:w-[1100px] max-w-auto sm:max-w-[1100px] flex flex-col items-center justify-start sm:justify-space-between py-0 px-4 sm:p-0"
	>
		<div
			class="h-full w-full sm:min-w-[744px] max-w-auto sm:max-w-[910px] flex flex-col sm:flex-row justify-start sm:justify-space-between py-0 px-4 sm:p-0"
		>
			<div
				class="relative sm:fixed flex box-content justify-center flex-col items-center p-0 sm:px-2 w-full sm:w-[287px]"
			>
				<a href="{{ id }}/{{ chapters.first.slug }}">
					<img
                        width="189"
                        height="252"
                        class="cursor-pointer shadow-lg border-gray-200"
                        src="{{ book.cover_image.url }}"
                    />
				</a>
				<div
					class="hidden sm:flex flex-col items-center w-full m-5 mb-2 pb-3 border-b border-gray-300"
				>
					<a
						class="link-button-item  sm:box-content font-semibold text-[14px] sm:text-[16px] flex items-center text-black border border-gray-300 decoration-none rounded-full justify-center  px-[18px] sm:px-0 my-1 py-[10px] sm:py-3 sm:ml-2 hover:bg-gray-50 hover:border-gray-400 hover:text-black sm:w-full h-[44px] flex-grow sm:h-auto mx-1 sm:mx-0"
						href="/podcast"
					>
						<img
							class="mr-3"
							src="https://thenetworkstate.com/images/new.svg"
						/>

						Watch Podcast
					</a>
					<a
						class="link-button-item  sm:box-content font-semibold text-[14px] sm:text-[16px] flex items-center text-black border border-gray-300 decoration-none rounded-full justify-center  px-[18px] sm:px-0 my-1 py-[10px] sm:py-3 sm:ml-2 hover:bg-gray-50 hover:border-gray-400 hover:text-black sm:w-full h-[44px] flex-grow sm:h-auto mx-1 sm:mx-0"
						href="{{ id }}/{{ chapters.first.slug }}"
					>
						<img
							class="mr-3"
							src="https://thenetworkstate.com/images/book.svg"
						/>

						Read Online
					</a>
					<a
						class="link-button-item  sm:box-content font-semibold text-[14px] sm:text-[16px] flex items-center text-black border border-gray-300 decoration-none rounded-full justify-center  px-[18px] sm:px-0 my-1 py-[10px] sm:py-3 sm:ml-2 hover:bg-gray-50 hover:border-gray-400 hover:text-black sm:w-full h-[44px] flex-grow sm:h-auto mx-1 sm:mx-0"
						href="{{ book.amazon_url }}"
						target="_blank"
					>
						<img
							class="mr-3"
							src="https://thenetworkstate.com/images/amazon-sm.svg"
						/>

						Buy on Amazon
					</a>
                    {% if book.pdf_file %}
                    <a
                        class="link-button-item  sm:box-content font-semibold text-[14px] sm:text-[16px] flex items-center text-black border border-gray-300 decoration-none rounded-full justify-center  px-[18px] sm:px-0 my-1 py-[10px] sm:py-3 sm:ml-2 hover:bg-gray-50 hover:border-gray-400 hover:text-black sm:w-full h-[44px] flex-grow sm:h-auto mx-1 sm:mx-0"
                        href="{{ book.pdf_file.url }}" 
                        download="{{ book.title }}.pdf"
                    >
                        <img
                            class="mr-3"
                            src="https://thenetworkstate.com/images/download.svg"
                        />
                        Download PDF
                    </a>
                    {% endif %}
				</div>
				<div
					class="flex flex-col w-full border-b border-transparent text-sm sm:hidden"
				>
					<div
						class="flex w-full flex-row border-b border-transparent justify-between items-center text-sm pb-2 px-0 pt-6 sm:hidden"
					>
						<a
							class="link-button-item  sm:box-content font-semibold text-[14px] sm:text-[16px] flex items-center text-black border border-gray-300 decoration-none rounded-full justify-center  px-[18px] sm:px-0 my-1 py-[10px] sm:py-3 sm:ml-2 hover:bg-gray-50 hover:border-gray-400 hover:text-black sm:w-full h-[44px] flex-grow sm:h-auto mx-1 sm:mx-0"
							href="/podcast"
						>
							<img
								class="mr-3"
								src="https://thenetworkstate.com/images/new.svg"
							/>

							Watch Podcast
						</a>
					</div>
					<div
						class="flex w-full flex-row border-b border-transparent justify-between items-center text-sm pb-2 px-0 sm:hidden"
					>
						<a
							class="link-button-item  sm:box-content font-semibold text-[14px] sm:text-[16px] flex items-center text-black border border-gray-300 decoration-none rounded-full justify-center  px-[18px] sm:px-0 my-1 py-[10px] sm:py-3 sm:ml-2 hover:bg-gray-50 hover:border-gray-400 hover:text-black sm:w-full h-[44px] flex-grow sm:h-auto mx-1 sm:mx-0"
							href="{{ id }}/{{ chapters.first.slug }}"
						>
							<img
								class="mr-3"
								src="https://thenetworkstate.com/images/book.svg"
							/>

							Read
						</a>
						<a
							class="link-button-item  sm:box-content font-semibold text-[14px] sm:text-[16px] flex items-center text-black border border-gray-300 decoration-none rounded-full justify-center  px-[18px] sm:px-0 my-1 py-[10px] sm:py-3 sm:ml-2 hover:bg-gray-50 hover:border-gray-400 hover:text-black sm:w-full h-[44px] flex-grow sm:h-auto mx-1 sm:mx-0"
							href="{{ book.amazon_url }}"
							target="_blank"
						>
							<img
								class="mr-3"
								src="https://thenetworkstate.com/images/amazon-sm.svg"
							/>

							Buy
						</a>
						{% if book.pdf_file %}
                        <a
                            class="link-button-item  sm:box-content font-semibold text-[14px] sm:text-[16px] flex items-center text-black border border-gray-300 decoration-none rounded-full justify-center  px-[18px] sm:px-0 my-1 py-[10px] sm:py-3 sm:ml-2 hover:bg-gray-50 hover:border-gray-400 hover:text-black sm:w-full h-[44px] flex-grow sm:h-auto mx-1 sm:mx-0"
                            href="{{ book.pdf_file.url }}" 
                            download="{{ book.title }}.pdf"
                        >
                            <img
                                class="mr-3"
                                src="https://thenetworkstate.com/images/download.svg"
                            />
                            Download PDF
                        </a>
                        {% endif %}
					</div>
				</div>
				<form
					class="subscribe flex flex-row justify-center items-center mt-1 w-full h-[44px] sm:max-w-[330px]"
				>
					<div
						class="pointer-events-auto flex-grow min-w-0 h-full rounded-full  border border-solid border-gray-300 hover:border-gray-200 focus-within:border-gray-200 clear-button-styles rounded-r-none"
					>
						<input
							class="text-m min-w-0 bg-transparent w-full pt-0 pr-2 pb-0 pl-[18px] leading-none clear-button-styles"
							placeholder="Want more? Enter email..."
							type="email"
						/>
					</div>
					<button
						type="submit"
						class="clear-button-styles font-semibold flex items-center justify-center rounded-full p-4 text-[16px] border border-solid border-black text-white bg-black h-full  w-[115px] min-w-[115px] rounded-l-none hover:bg-gray-900"
					>
						<span class="action-label">Subscribe</span>
						<div class="hidden small-white-loader"><div></div></div>
					</button>
				</form>
				<div
					class="subscribe-sent hidden py-2 px-[18px] font-inter font-base flex-row justify-between items-center rounded-lg max-w-[300px] font-medium text-white"
					style="background-color: #3c864e; width: calc(100% - 36px)"
				>
					Check your email!
					<img
						src="https://thenetworkstate.com/images/check-green.svg"
						class="rounded-full p-0.5 bg-white"
					/>
				</div>
			</div>
			<div
				class="flex flex-grow flex-col sm:ml-[90px] sm:pl-[250px] sm:pr-[10px] p-0 m-0"
			>
				<div
					class="hidden sm:flex flex-col w-full border-b border-gray-300 pb-6"
				>
					<div
						class="font-suisse text-lg text-gray-700 mb-3 font-bold"
					>
						Description
					</div>
					<div class="font-inter text-gray-700 text-base">
						{{ book.description }}
					</div>
				</div>

				<div class="pointer-events-auto flex flex-col w-full last:pb-16">
                    {% for category_id, chapters in grouped_chapters.items %}
                        {% with first_chapter=chapters|first %}
                        <!-- Category Header (e.g., "Quickstart") -->
                        <a href="{{ id }}/{{ first_chapter.slug }}" 
                        class="text-black no-underline cursor-pointer flex mt-[18px] mb-4 font-suisse text-[15px] sm:text-lg font-bold leading-6">
                            {{ first_chapter.category_id }}. {{ first_chapter.category_text }}
                            <button class="box-content h-6 clear-button-styles rounded-full p-0 border border-solid border-gray-300 ml-3 hover:bg-gray-50">
                                <img width="24" height="24" src="https://thenetworkstate.com/images/jump.svg" />
                            </button>
                        </a>
                        
                        <!-- Chapters within the Category -->
                        <div class="flex flex-col w-full border border-gray-300 rounded-xl">
                            {% for chapter in chapters %}
                            <a href="{{ id }}/{{ chapter.slug }}" 
                            class="text-black no-underline cursor-pointer flex flex-row items-center font-inter text-sm w-full py-2 px-3 m-0 border-b border-gray-300 last:border-none first:rounded-t-xl last:rounded-b-xl hover:bg-gray-50 active:bg-gray-100">
                                <button class="clear-button-styles rounded-full p-0 border border-solid border-gray-300 mr-4">
                                    <img width="24" height="24" src="https://thenetworkstate.com/images/jump.svg" />
                                </button>
                                {{ chapter.title }}
                            </a>
                            {% endfor %}
                        </div>
                        {% endwith %}
                    {% endfor %}
                </div>
			</div>
		</div>
	</div>
</main>
{% endblock body %}
